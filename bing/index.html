<!DOCTYPE html>
<html>
<head>
	<title>Bing Image Search</title>
</head>

<body>
	<script>

		var xhr = new XMLHttpRequest();
		var endpoint = "https://api.cognitive.microsoft.com/bing/v5.0/images/search";
		var apiKey = "446fb5ff1b48443b80734e86da4d564c";
		var query = "?q=cats&count=1&offset=0";

		xhr.open('GET', endpoint+query /*"//ipinfo.io/json"*/, true);
		xhr.setRequestHeader("Ocp-Apim-Subscription-key", apiKey);
		xhr.send();
		xhr.addEventListener("readystatechange", processRequest, false);
		xhr.onreadystatechange = processRequest;

		function processRequest(e) {
			// State 4 = DONE, status 200 = success
			if (xhr.readyState == 4 && xhr.status == 200) {
				var response = JSON.parse(xhr.responseText);
				alert(response.value[0].name);
				console.log(xhr.responseText);
				xhr.onreadystatechange = null;
			}
		}

	</script>
</body>
</html>
